
<div class="container", style = "margin-top: 15px">
  <div class="row">
    <div class="col-md-9">
      <h1>Your Dashboard</h1>
        <div class = "bookings">
          <h3>Requested Bookings</h3>
          <ul>
            <% @booking_made.each do |booking| %>
              <li>
                <div class="card-product mb-2 rounded">
                  <% if @worker_profile.user.photo.attached?%>
                    <%= cl_image_tag(booking.worker_profile_tag.worker_profile.user.photo.key,:width=>200, :height=>200, :gravity=>"face", :crop=>"thumb") %>
                  <% else %>
                    <%= cl_image_tag("worker_usd45y",:width=>200, :height=>200, :gravity=>"face", :crop=>"thumb") %>
                  <% end %>
                  <div class="card-product-infos w-100", style = "position:relative">
                    <%= link_to booking_path(booking) do %>
                      <h2><%= booking.description %></h2>
                    <% end %>
                    <p>Your name: <%= booking.user.first_name %></p>
                    <p>Date: <%= booking.date %></p>
                    <p>Price: <%= booking.price %></p>
                    <div class = "d-flex justify-content-end">
                    <% if booking.confirmation? %>
                      <p>This booking is confirmed</p>
                    <% else %>
                      <p>Waiting for the worker's confirmation</p>
                    <% end %>
                    </div>
                  </div>
                </div>
              </li>
            <% end %>
            </ul>
        </div>
        <% if @worker_profile %>
          <div class = "bookings">
            <h3>Received Bookings</h3>
            <ul>
              <% @booking_received.each do |booking| %>
                  <li>
                    <div class="card-product mb-2 rounded">
                      <% if @worker_profile.user.photo.attached?%>
                        <%= cl_image_tag(booking.worker_profile_tag.worker_profile.user.photo.key,:width=>200, :height=>200, :gravity=>"face", :crop=>"thumb") %>
                      <% else %>
                        <%= cl_image_tag("worker_usd45y",:width=>200, :height=>200, :gravity=>"face", :crop=>"thumb") %>
                      <% end %>
                      <div class="card-product-infos">
                      <%= link_to booking_path(booking) do %>
                        <h2><%= booking.description %></h2>
                      <% end %>
                        <p>Your name: <%= booking.user.first_name %></p>
                        <p>Date: <%= booking.date %></p>
                        <p>Price: <%= booking.price %></p>
                        <div class = "d-flex justify-content-end">
                          <% if booking.confirmation? %>
                            <p>You confirmed the booking</p>
                          <% else %>
                            <%= link_to "confirm",  confirm_booking_path(booking), method: :patch, class: "btn btn-success" %>
                          <% end %>
                        </div>
                      </div>
                    </div>
                  </li>
                <% end %>
              </ul>
          </div>
        <% end %>
      </div>
      <div class="col-md-3">
        <h3>Settings:</h3>
        <% if current_user.worker_profile %>
          <%= link_to "Availabilities & tags", edit_worker_profile_path(@worker_profile), class: "btn btn-success mb-2" %>
          <%= link_to "Profile", edit_user_registration_path, class: "btn btn-success mb-2" %>
        <% else %>
          <%= link_to "Profile", edit_user_registration_path, class: "btn btn-success mb-2" %>
        <% end %>
      </div>
  </div>
</div>


<!--   create_table "bookings", force: :cascade do |t|
    t.bigint "user_id", null: false
    t.text "description"
    t.bigint "worker_profile_tag_id", null: false
    t.boolean "confirmation", default: false
    t.datetime "date"
    t.integer "duration"
    t.integer "price"
    t.datetime "created_at", precision: 6, null: false
    t.datetime "updated_at", precision: 6, null: false
    t.index ["user_id"], name: "index_bookings_on_user_id"
    t.index ["worker_profile_tag_id"], name: "index_bookings_on_worker_profile_tag_id"
  end -->







<!--   create_table "bookings", force: :cascade do |t|
    t.bigint "user_id", null: false
    t.text "description"
    t.bigint "worker_profile_tag_id", null: false
    t.boolean "confirmation", default: false
    t.datetime "date"
    t.integer "duration"
    t.integer "price"
    t.datetime "created_at", precision: 6, null: false
    t.datetime "updated_at", precision: 6, null: false
    t.index ["user_id"], name: "index_bookings_on_user_id"
    t.index ["worker_profile_tag_id"], name: "index_bookings_on_worker_profile_tag_id"
  end -->


